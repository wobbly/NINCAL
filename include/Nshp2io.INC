..............................................................................
.
. NSHP2IO INCLUSION
. NIN SUPLLEMENTAL SHIPMENT FILE I/O ROUTINES
.
.
. FILE NAME : NINSHP2
. REC LENGTH: 506 FIXED
. INDEX KEY : 1-6 (LR NUMBER)
.
.05/1/2003 ASH Created
..............................................................................
.
. ENTRY POINT : NSHP2KEY
. REQUIRED    : 'NSHP2FLD'
. RETURNED    : SHIPPING RECORD
. DESCRIPTION : EXACT ISAM KEY READ
.
NSHP2KEY
	BRANCH	NSHP2FLAG TO NSHP21
	CALL	NSHP2OPEN
NSHP21
	branch	nSHP2lock to nSHP21l,nSHP21r,nSHP21n
.with file locks
NSHP21L
	FILEPI	1;NSHP2FILE
	READ	NSHP2FILE,NSHP2FLD;SHP2vars
	RETURN
.with record locks . note file open must have had flag set
NSHP21R
	READLK	NSHP2FILE,NSHP2FLD;SHP2vars
	RETURN
.no locks
NSHP21N
	READ	NSHP2FILE,NSHP2FLD;SHP2vars
	RETURN
..............................................................................
.
. ENTRY POINT : NSHP2TST
. REQUIRED    : 'NSHP2FLD'
. RETURNED    :
. DESCRIPTION : ISAM KEY TEST READ
.
NSHP2TST
	BRANCH	NSHP2FLAG TO NSHP22
	CALL	NSHP2OPEN
NSHP22
	branch	nSHP2lock to nSHP22l,nSHP22r,nSHP22n
NSHP22L
	FILEPI	1;NSHP2FILE
	READ	NSHP2FILE,NSHP2FLD;;
	RETURN
NSHP22R
	READLK	NSHP2FILE,NSHP2FLD;;
	RETURN
NSHP22N
	READ	NSHP2FILE,NSHP2FLD;;
	RETURN
..............................................................................
.
. ENTRY POINT : NSHP2KS
. REQUIRED    :
. RETURNED    : SHIPPING RECORD
. DESCRIPTION : KEY SEQUENTIAL SHIPPING FILE READ
.
NSHP2KS
	BRANCH	NSHP2FLAG TO NSHP23
	CALL	NSHP2OPEN
NSHP23
	branch	nSHP2lock to nSHP23l,nSHP23r,nSHP23n
NSHP23L
	FILEPI	1;NSHP2FILE
	READKS	NSHP2FILE;SHP2VARS
	RETURN
NSHP23R
	READKSLK NSHP2FILE;SHP2VARS
	RETURN
NSHP23N
	READKS	NSHP2FILE;SHP2VARS
	RETURN
..............................................................................
.
. ENTRY POINT : NSHP2SEQ
. REQUIRED    :
. RETURNED    : SHIPPING RECORD
. DESCRIPTION : SEQUENTIAL SHIPPING FILE READ
.
NSHP2SEQ
	BRANCH	NSHP2FLAG TO NSHP24
	CALL	NSHP2OPEN
NSHP24
	branch	nSHP2lock to nSHP24l,nSHP24r,nSHP24n
NSHP24L
	FILEPI	1;NSHP2FILE
	READ	NSHP2FILE,SEQ;SHP2VARS
	RETURN
NSHP24R
	READLK	NSHP2FILE,SEQ;SHP2VARS
	RETURN
NSHP24N
	READ	NSHP2FILE,SEQ;SHP2VARS
	RETURN
..............................................................................
.
. ENTRY POINT : NSHP2WRT
. REQUIRED    : 'NSHP2FLD'
. RETURNED    :
. DESCRIPTION : EXACT ISAM KEY TXT/ISI INSERT
.
NSHP2WRT
	BRANCH	NSHP2FLAG TO NSHP25
	CALL	NSHP2OPEN
NSHP25
	branch	nSHP2lock to nSHP25l,nSHP25r
NSHP25L
	FILEPI	1;NSHP2FILE
	WRITE	NSHP2FILE,NSHP2FLD;SHP2VARS
	RETURN
NSHP25R
	WRITE	NSHP2FILE,NSHP2FLD;SHP2VARS
	RETURN
..............................................................................
.
. ENTRY POINT : NSHP2UPD
. REQUIRED    : A PREVIOUS KEY READ
. RETURNED    :
. DESCRIPTION : KEY UPDATE LIST FILE
.
NSHP2UPD
	BRANCH	NSHP2FLAG TO NSHP26
	CALL	NSHP2OPEN
NSHP26
	branch	nSHP2lock to nSHP26l,nSHP26r
NSHP26L
	FILEPI	1;NSHP2FILE
	UPDATE	NSHP2FILE;SHP2VARS
	RETURN
NSHP26R
	UPDATE	NSHP2FILE;SHP2VARS
	RETURN
..............................................................................
.
. ENTRY POINT : NSHP2DEL
. REQUIRED    : 'NSHP2FLD'
. RETURNED    :
. DESCRIPTION : EXACT ISAM KEY TXT/ISI DELETE
.
NSHP2DEL
	BRANCH	NSHP2FLAG TO NSHP27
	CALL	NSHP2OPEN
NSHP27
	FILEPI	1;NSHP2FILE
	DELETE	NSHP2FILE,NSHP2FLD
	RETURN
...............................................................................
.
. ENTRY POINT : NSHP2OPEN
. REQUIRED    : 'NSHP2FLAG'
. RETURNED    : 'NSHP2FLAG' SET TO '1' IF OPENNED
. DESCRIPTION : OPEN NIN SHIPPING FILE
.               DISPLAY ERROR AND ABORT IF NOT ON-LINE.
.
NSHP2OPEN
	TRAP	NSHP2GONE IF IO
	BRANCH	NSHP2LOCK TO NSHP2OPENl,NSHP2OPENr
NSHP2OPENl
	OPEN	NSHP2FILE,NSHP2NAME
	TRAPCLR	IO
	MOVE	C1 TO NSHP2FLAG
	RETURN
NSHP2OPENR
	OPEN	NSHP2FILE,NSHP2NAME,LOCKMANUAL,SINGLE
	TRAPCLR	IO
	MOVE	C1 TO NSHP2FLAG
	RETURN
NSHP2GONE
	MOVE	NSHP2NAME TO FILENAME
	CALL	FILEGONE
.
..............................................................................
